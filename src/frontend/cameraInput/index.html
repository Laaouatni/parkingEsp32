<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- <script src="https://docs.opencv.org/4.11.0/opencv.js"></script> -->
  </head>
  <body class="p-2 grid gap-4">
    <video id="videoElement" autoplay></video>
    <canvas id="canvasElement" class="outline"></canvas>
    <script>
      const videoElement = document.getElementById("videoElement");
      const canvasElement = document.getElementById("canvasElement");
      const ctx = canvasElement.getContext("2d");
      navigator.mediaDevices
        .getUserMedia({ video: { facingMode: "environment" } })
        .then((stream) => {
          videoElement.srcObject = stream;
          const videoElementStyleProperties =
            videoElement.getBoundingClientRect();
          canvasElement.setAttribute(
            "height",
            videoElementStyleProperties.height
          );
          canvasElement.setAttribute(
            "width",
            videoElementStyleProperties.width
          );
          const FPS = 1;
          let i = 0;
          setInterval(() => {
            console.log(i++);
            ctx.drawImage(
              videoElement,
              0,
              0,
              canvasElement.clientWidth,
              canvasElement.clientHeight
            );
          }, 1000 / FPS);
        })
        .catch((err) => {
          document.body.textContent = "errore: " + err;
        });
    </script>
  </body>
</html>
