<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://docs.opencv.org/4.11.0/opencv.js"></script>
  </head>
  <body class="p-2 grid gap-4">
    <video id="videoElement" autoplay hidden></video>
    <canvas id="canvasElement" class="outline"></canvas>
    <script>
      cv.then((cv2) => {
        const videoElement = document.getElementById("videoElement");
        const canvasElement = document.getElementById("canvasElement");
        const ctx = canvasElement.getContext("2d");
        const FPS = 20;
        const MULTIPLIER = 2;
        const DIMENSIONS = { width: 210, height: 297 };

        videoElement.width = DIMENSIONS.width;
        videoElement.height = DIMENSIONS.height;

        navigator.mediaDevices
          .getUserMedia({
            video: {
              facingMode: "environment",
              width: DIMENSIONS.width,
              height: DIMENSIONS.height,
            },
          })
          .then((stream) => {
            videoElement.srcObject = stream;
          })
          .catch((err) => console.error);

        videoElement.addEventListener("playing", () => {
          let i = 0;
          canvasElement.width = videoElement.width;
          canvasElement.height = videoElement.height;
          setInterval(() => {
            // console.log(i++);
            ctx.drawImage(
              videoElement,
              0,
              0,
              videoElement.width,
              videoElement.height
            );
          }, 1000 / FPS);
        });
      });
    </script>
  </body>
</html>
